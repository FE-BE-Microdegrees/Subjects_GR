# Express

Σε αυτό το μάθημα, θα εξερευνήσουμε το Express, ένα δημοφιλές πλαίσιο εφαρμογών ιστού για το Node.js. Θα μάθουμε πώς να εγκαθιστούμε το Express, να χρησιμοποιούμε τις μεθόδους του και να δουλεύουμε με αντικείμενα αιτήσεων και απαντήσεων στο Express.

![Express](Express.webp)

Image source: Dall-E by OpenAI

- [Express](#express)
  - [Μαθησιακά αποτελέσματα](#Μαθησιακά-αποτελέσματα)
  - [Τι είναι το Express;](#Τι-είναι-το-Express)
  - [Εγκαθιστώντας το Express](#installing-express)
  - [Μέθοδοι Express App](#Μέθοδοι-Express-App)
  - [Αίτηση και απάντηση στην Express](#Αίτηση-και-απάντηση-στην-Express)
    - [Πηγές](#Πηγές)

## Μαθησιακά αποτελέσματα

Στο τέλος αυτού του μαθήματος, θα είστε σε θέση να:

- Να εξηγήσετε τι είναι το Express και γιατί χρησιμοποιείται.
- Να εγκαταστήσετε την Express σε ένα έργο Node.js.
- Να δημιουργήσετε μια απλή εφαρμογή Express και να την εκτελέσετε.

## Τι είναι το Express;

Το Express είναι ένα δημοφιλές πλαίσιο εφαρμογών ιστού για το Node.js, σχεδιασμένο για τη δημιουργία επεκτάσιμων και ευέλικτων εφαρμογών ιστού. Παρέχει μια σειρά χαρακτηριστικών για την ανάπτυξη εφαρμογών ιστού, όπως δρομολόγηση, ενδιάμεσο λογισμικό και υποστήριξη για το χειρισμό αιτημάτων και απαντήσεων HTTP.

Το Express απλοποιεί τη διαδικασία δημιουργίας εφαρμογών ιστού, προσφέροντας ένα ελαφρύ αλλά ισχυρό πλαίσιο που επιτρέπει στους προγραμματιστές να επικεντρωθούν στη δημιουργία της βασικής λειτουργικότητας της εφαρμογής. Περιλαμβάνει ένα απλό API που επιτρέπει στους προγραμματιστές να δημιουργούν εύκολα διαδρομές HTTP, να ορίζουν λειτουργίες middleware για το χειρισμό αιτημάτων και να συνεργάζονται με διάφορες μηχανές διαμόρφωσης προτύπων και άλλα εργαλεία.

## Εγκαθιστώντας το Express

Για να εγκαταστήσετε την Express σε ένα έργο Node.js, ακολουθήστε τα παρακάτω βήματα:

1. Δημιουργήστε έναν νέο κατάλογο για το έργο σας και πλοηγηθείτε σε αυτόν τον κατάλογο στο τερματικό.
2. Αρχικοποιήστε ένα νέο έργο Node.js χρησιμοποιώντας την εντολή `npm init`. Αυτό θα δημιουργήσει ένα αρχείο `package.json` που θα παρακολουθεί τις εξαρτήσεις του έργου σας.
3. Εγκαταστήστε την Express χρησιμοποιώντας την εντολή `npm install express`. Αυτό θα κατεβάσει και θα εγκαταστήσει την τελευταία έκδοση του Express και τις εξαρτήσεις του.

Ακολουθεί ένα παράδειγμα εγκατάστασης του Express με χρήση της γραμμής εντολών:

```bash
mkdir myapp
cd myapp
npm init -y
npm install express
```

Αφού εγκαταστήσετε την Express, μπορείτε να δημιουργήσετε ένα νέο αρχείο με όνομα `app.js` και να αρχίσετε να δημιουργείτε την εφαρμογή σας χρησιμοποιώντας το πλαίσιο Express. Για να χρησιμοποιήσετε το Express στην εφαρμογή σας, πρέπει να το εισάγετε στο αρχείο `app.js` σας ως εξής:


```javascript
const express = require("express");
const app = express();
```

Ακολουθεί ένα απλό παράδειγμα μιας εφαρμογής Express:

```javascript
const express = require("express");
const app = express();

const port = 3000;

app.get("/", (req, res) => {
  return res.send("Hello!");
});

app.listen(port, () => {
  console.log(`Listening on port: ${port}`);
});
```

## Μέθοδοι Express App

Παρόμοια με τις [HTTP request methods](../http-methods/README.md), η Express παρέχει ένα ευρύ φάσμα μεθόδων που μπορούν να χρησιμοποιηθούν για τη δημιουργία εφαρμογών ιστού και τη λήψη αιτημάτων από πελάτες. Ακολουθούν μερικές από τις πιο συνηθισμένες μεθόδους σε μια εφαρμογή Express:

- **GET**: (`app.get()`) Αυτή η μέθοδος χρησιμοποιείται για την ανάκτηση δεδομένων από τον διακομιστή. Χρησιμοποιείται για να ζητήσετε έναν συγκεκριμένο πόρο, όπως μια ιστοσελίδα, μια εικόνα ή ένα βίντεο.

- **POST**: (`app.post()`) Αυτή η μέθοδος χρησιμοποιείται για την αποστολή δεδομένων στον διακομιστή. Συνήθως χρησιμοποιείται για την υποβολή φορμών ή την αποστολή δεδομένων στο διακομιστή για επεξεργασία.

- **PUT**: (`app.put()`) Αυτή η μέθοδος χρησιμοποιείται για την ενημέρωση των υφιστάμενων δεδομένων στο διακομιστή. Συνήθως χρησιμοποιείται για την ενημέρωση ενός συγκεκριμένου πόρου (π.χ. ενός προφίλ χρήστη ή πληροφοριών προϊόντος).

- **DELETE**: (`app.delete()`) Αυτή η μέθοδος χρησιμοποιείται για τη διαγραφή δεδομένων από το διακομιστή. Συνήθως χρησιμοποιείται για τη διαγραφή ενός συγκεκριμένου πόρου, όπως ένας λογαριασμός χρήστη ή ένα προϊόν.

- **USE**: (`app.use()`) Αυτή η μέθοδος χρησιμοποιείται για τον ορισμό συναρτήσεων ενδιάμεσου λογισμικού που εκτελούνται για κάθε αίτηση που αντιστοιχεί σε μια συγκεκριμένη διαδρομή.

- **SET**: (`app.set()`) Αυτή η μέθοδος χρησιμοποιείται για τον καθορισμό μεταβλητών σε επίπεδο εφαρμογής (π.χ. αριθμός θύρας ή μηχανή προβολής).

Αυτές είναι μερικές μόνο από τις πολλές μεθόδους που προσφέρει η Express. Κάθε μέθοδος μπορεί να χρησιμοποιηθεί για τη δημιουργία διαδρομών που χειρίζονται συγκεκριμένους τύπους αιτημάτων HTTP, επιτρέποντας στους προγραμματιστές να δημιουργούν ισχυρές και ευέλικτες εφαρμογές ιστού.

## Αίτηση και απάντηση στην Express (Request and Response in Express)

Παρόμοια με το πρωτόκολλο HTTP, το Express παρέχει επιλογές για τη λήψη και την αποστολή αντικειμένων αίτησης και απόκρισης.

Όταν λαμβάνεται ένα αίτημα, η Express δημιουργεί τη δική της έκδοση του αιτήματος, η οποία έχει πολλές διαφορετικές ιδιότητες, όπως

- **params**: (req.params) Αυτό το χαρακτηριστικό είναι ένα αντικείμενο που περιέχει παραμέτρους που αντιστοιχούν στην ονομαζόμενη διαδρομή "parameters". Για παράδειγμα, αν έχετε μια διαδρομή `/users/:id`, το αντικείμενο params θα έχει το χαρακτηριστικό `id` με την τιμή `:id`.

- **query**: (req.query) Αυτό το χαρακτηριστικό είναι ένα αντικείμενο που περιέχει χαρακτηριστικά για κάθε παράμετρο της συμβολοσειράς ερωτήματος της διαδρομής. Για παράδειγμα, εάν η διεύθυνση URL είναι `/users?sort=desc`, το αντικείμενο αίτησης θα περιέχει `{ sort: 'desc' }`.

- **body**: (req.body) Αυτό το χαρακτηριστικό είναι ένα αντικείμενο που περιέχει το αναλυμένο σώμα της αίτησης όταν η μέθοδος αίτησης είναι `POST`, `PUT` ή `PATCH` και η επικεφαλίδα τύπου περιεχομένου είναι `application/x-www-form-urlencoded` ή `application/json`.

- **headers**: (req.headers) Αυτό το χαρακτηριστικό είναι ένα αντικείμενο που περιέχει τις επικεφαλίδες που αποστέλλονται από τον πελάτη.

- **method**: (req.method) Αυτό το χαρακτηριστικό είναι μια συμβολοσειρά που περιέχει τη μέθοδο αίτησης HTTP (π.χ. `GET`, `POST`, `PUT`, `DELETE` κ.λπ.).

- **url**: (req.url) Αυτό το χαρακτηριστικό είναι μια συμβολοσειρά που περιέχει τη διεύθυνση URL της αίτησης.

- **cookies**: (req.cookies) Αυτό το χαρακτηριστικό είναι ένα αντικείμενο που περιέχει τα cookies που αποστέλλονται από τον πελάτη.

- **ip**: (req.ip) Αυτό το χαρακτηριστικό είναι μια συμβολοσειρά που περιέχει τη διεύθυνση IP του πελάτη.

- **protocol**: (req.protocol) Αυτό το χαρακτηριστικό είναι μια συμβολοσειρά που περιέχει το πρωτόκολλο που χρησιμοποιήθηκε για την αίτηση (http ή https).

Συνολικά, το αντικείμενο αίτησης Express παρέχει στους προγραμματιστές πληθώρα πληροφοριών σχετικά με την αίτηση του πελάτη, επιτρέποντάς τους να δημιουργήσουν ισχυρές και ευέλικτες εφαρμογές ιστού.

Για την αποστολή μιας απάντησης, η Express προσφέρει διάφορες λειτουργίες, οι πιο συνηθισμένες από τις οποίες είναι οι εξής:

- **send**: (res.send()) Αυτή η μέθοδος χρησιμοποιείται για την αποστολή μιας απόκρισης συμβολοσειράς, buffer ή JSON πίσω στον πελάτη. Ορίζει αυτόματα την επικεφαλίδα `Content-Type` με βάση τον τύπο των δεδομένων.
- 
- **json**: (res.json()) Αυτή η μέθοδος χρησιμοποιείται για την αποστολή μιας απάντησης JSON πίσω στον πελάτη. Ορίζει την επικεφαλίδα `Content-Type` σε `application/json`.

- **redirect**: (res.redirect()) Αυτή η μέθοδος χρησιμοποιείται για την ανακατεύθυνση του πελάτη σε άλλη διεύθυνση URL. Ορίζει την επικεφαλίδα τοποθεσίας στην καθορισμένη διεύθυνση URL και έχει ως προεπιλογή τον κωδικό κατάστασης `302`.

- **render**: (res.render()) Αυτή η μέθοδος χρησιμοποιείται για την απόδοση ενός προτύπου προβολής και την αποστολή μιας απάντησης HTML πίσω στον πελάτη. Λαμβάνει το όνομα του προτύπου και ένα αντικείμενο δεδομένων ως ορίσματα.

- **status**: (res.status()) Αυτή η μέθοδος χρησιμοποιείται για τον καθορισμό του κωδικού κατάστασης απόκρισης HTTP. Μπορεί να χρησιμοποιηθεί για τον καθορισμό οποιουδήποτε έγκυρου κωδικού κατάστασης HTTP.

- **sendFile**: (res.sendFile()) Αυτή η μέθοδος χρησιμοποιείται για την αποστολή ενός αρχείου ως απάντηση. Λαμβάνει τη διαδρομή του αρχείου ως όρισμα και ρυθμίζει αυτόματα την επικεφαλίδα content-type με βάση την επέκταση του αρχείου.

Αυτές είναι μερικές μόνο από τις πολλές μεθόδους ανταπόκρισης που προσφέρει η Express. Κάθε μέθοδος μπορεί να χρησιμοποιηθεί για την αποστολή διαφορετικών τύπων απαντήσεων στον πελάτη.

### Πηγές

- [Express Official Website](https://expressjs.com/)
- [Express API Reference](https://expressjs.com/en/4x/api.html#app.METHOD)
- [Request Object in Express](https://expressjs.com/en/api.html#req)
- [Response Object in Express](https://expressjs.com/en/api.html#res)
