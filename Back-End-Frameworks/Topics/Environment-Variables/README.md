# Μεταβλητές περιβάλλοντος

- [Μεταβλητές περιβάλλοντος](#Μεταβλητές-περιβάλλοντος)
  - [Μαθησιακά αποτελέσματα](#Μαθησιακά-αποτελέσματα)
  - [Χρήση μεταβλητών περιβάλλοντος στο Node.js](#Χρήση-μεταβλητών-περιβάλλοντος-στο-Node.js)
    - [Παράδειγμα αρχείου `.env`](#Παράδειγμα-αρχείου-env)
    - [Χρήση της ενότητας `dotenv`](#Χρήση-της-ενότητας-dotenv)
    - [Χρήση μεταβλητών περιβάλλοντος απευθείας από τη γραμμή εντολών](#Χρήση-μεταβλητών-περιβάλλοντος-απευθείας-από-τη-γραμμή-εντολών)
    - [Εντοπισμός περιβάλλοντος](#Εντοπισμός-περιβάλλοντος)
    - [Προσθήκη μεταβλητών περιβάλλοντος στο `package.json`](#Προσθήκη-μεταβλητών-περιβάλλοντος-στο-package.json)

## Μαθησιακά αποτελέσματα

Στο τέλος αυτού του κεφαλαίου, οι εκπαιδευόμενοι θα πρέπει να είναι σε θέση να:

- να ρυθμίζουν τις μεταβλητές περιβάλλοντος στο Node.js,
- να χρησιμοποιούν μεταβλητές περιβάλλοντος στο Node.js.

Οι μεταβλητές περιβάλλοντος είναι μεταβλητές που είναι διαθέσιμες σε όλες τις διεργασίες που εκτελούνται σε έναν υπολογιστή. Είναι χρήσιμες για τον καθορισμό διαφόρων ρυθμίσεων και παραμέτρων, όπως συνδέσεις βάσεων δεδομένων, κλειδιά API κ.λπ. Με τη χρήση των μεταβλητών περιβάλλοντος, μπορούμε να αλλάξουμε τη διαμόρφωση μιας εφαρμογής χωρίς να τροποποιήσουμε τον κώδικα, επιτρέποντας την ομαλή μετάβαση μεταξύ διαφορετικών περιβαλλόντων, όπως η ανάπτυξη, η δοκιμή και η παραγωγή.

## Χρήση μεταβλητών περιβάλλοντος στο Node.js

Οι μεταβλητές περιβάλλοντος μπορούν να χρησιμοποιηθούν στο Node.js με διάφορους τρόπους. Μια κοινή πρακτική είναι να αποθηκεύετε τις μεταβλητές σε ένα ξεχωριστό αρχείο `.env` και να τις χρησιμοποιείτε στην εφαρμογή.

### Παράδειγμα αρχείου `.env`

```bash
DB_HOST=localhost
DB_USER=root
DB_PASS=secret
```

### Χρήση της ενότητας `dotenv`

1. **Εγκαταστήστε την ενότητα `dotenv`:**

```bash
npm install dotenv
```

2. **Φορτώστε το αρχείο `.env` στην εφαρμογή:**

```javascript
require("dotenv").config();
```

3. **Χρησιμοποιήστε τις μεταβλητές στην εφαρμογή:**

```javascript
const host = process.env.DB_HOST;
const user = process.env.DB_USER;
const pass = process.env.DB_PASS;
```

### Χρήση μεταβλητών περιβάλλοντος απευθείας από τη γραμμή εντολών

Μπορείτε επίσης να ορίσετε μεταβλητές περιβάλλοντος απευθείας από τη γραμμή εντολών. Για παράδειγμα:

```bash
PORT=3000 node index.js
```

Στην εφαρμογή:

```javascript
const port = process.env.PORT;
```

### Εντοπισμός περιβάλλοντος

Μπορείτε να προσδιορίσετε αν η εφαρμογή εκτελείται σε περιβάλλον ανάπτυξης, παραγωγής ή δοκιμής:

```bash
NODE_ENV=development node index.js
```

Στην εφαρμογή:

```javascript
const env = process.env.NODE_ENV;
const db = env === "test" ? "testdb" : "db";
```

### Προσθήκη μεταβλητών περιβάλλοντος στο `package.json`

Για να προσθέσετε μεταβλητές περιβάλλοντος στο `package.json`, είναι βολικό να χρησιμοποιήσετε το module `cross-env`:


1. **Εγκαταστήστε το `cross-env`:**

```bash
npm install cross-env
```

2. **Προσθέστε ένα σενάριο στο αρχείο `package.json`:**

```json
{
  "scripts": {
    "start": "cross-env NODE_ENV=production node index.js"
  }
}
```

Το `cross-env` σας επιτρέπει να ορίζετε μεταβλητές περιβάλλοντος με τρόπο που να λειτουργεί με παρόμοιο τρόπο σε διαφορετικά λειτουργικά συστήματα, εξασφαλίζοντας ότι οι εντολές λειτουργούν τόσο στα Windows όσο και στα συστήματα που βασίζονται στο UNIX.

Η χρήση αυτών των πρακτικών συμβάλλει στη διατήρηση της διαμόρφωσης της εφαρμογής καθαρής και ασφαλούς, αποφεύγοντας την έκθεση ευαίσθητων δεδομένων, όπως κωδικοί πρόσβασης και κλειδιά API.

